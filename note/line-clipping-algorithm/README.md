---
id: line-clipping-algorithm

title: 线段裁剪算法
---

# Cohen-SutherLand 线段裁剪算法

用 4 位二进制来表示二维平面上的点与裁剪窗口之间的位置关系。假设：

- `0b0000` 表示在裁剪窗口内部
- `0b0001` 表示在裁剪窗口的左侧
- `0b0010` 表示在裁剪窗口的右侧
- `0b0100` 表示在裁剪窗口的下侧
- `0b1000` 表示在裁剪窗口的上侧

通过这种编码可以将二维平面分为 9 个区域。对线段的两个端点 `p0` 和 `p1`，分别计算它们的区域码 `code0` 和 `code1`。

当满足下面的条件时，算法终止：

- `code0 | code1 == 0b0000`，表示两个端点都在裁剪窗口内部，返回线段的两个端点。
- `code0 & code1 != 0b0000`，表示两个端点都在裁剪窗口的同一侧，无返回结果。

否则，选择一个在裁剪窗口外某一侧的端点 `p`，计算这一侧与线段的交点，用交点替换端点 `p` 并更新对应的区域码。重复上述步骤直到算法终止。
