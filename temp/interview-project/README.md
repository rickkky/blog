---
id: interview-project

title: Interview Project
---

# GPS 上报

- 通过 WebSocket 接收 GPS 点位上报消息。GPS 点位多，上报频率高，每次上报以后触发地图点位更新动画，导致卡顿。
- 缓存及批量处理。将一段时间内的上报消息缓存，定时批量处理。

# 地图优化

- 地图引擎相关对象被 Vue 转换为响应式对象，由于地图引擎对象属性较多，并且如图层对象可能包含大量点位数据，转换为响应式对象会导致不必要的依赖收集和派发更新过程，影响性能。提供统一的封装，在创建地图相关对象时为对象设置 `_isVue`（Vue 2.6）或 `__v_skip`（Vue 2.7）属性，避免被转换为响应式对象。
- 共享样式。地图上每个点位都要创建一个样式对象，当地图上点位数量较多时，会导致内存占用过高，同时也会影响渲染性能。通过对点位属性 Hash 的方式，利用函数缓存避免重复创建相同的样式对象，使相同样式的点位共享一个样式对象。同时在创建样式对象的过程中，对图片资源请求、SVG 编码等耗时操作进行缓存，避免重复操作。
- 点位事件绑定优化。地图引擎只提供了单个点位点击事件的监听方法。实际应用中，当点位数量较多时，每个点位都绑定点击事件会导致内存占用过高；并且点位移除以后，事件监听回调函数持有的闭包可能还包含了对已经移除的点位对象的引用，导致内存泄漏。统一封装针对图层的点击事件监听，通过类似事件委托的方式，减少事件监听函数的数量，避免内存泄漏。

# 点位聚合

# 远程组件

- 将业务组件作为远程组件进行加载。业务组件构建时，组件主体构建为独立的 UMD 模块，并生成一个代理组件作为 NPM 包的 ESM 入口。应用本地安装业务组件 NPM 包，引入的组件实际上是代理组件。代理组件注册的时候可以通过模块加载器预加载远程组件资源。当代理组件渲染时，会首先渲染后备内容，并通过模块加载器加载远程组件，加载完成后替换后备内容。
- 模块加载器。
- 按需加载，减少应用构建体积，优化应用首屏加载性能。
- 支持预加载，提前加载远程组件资源，减少首次加载时的延迟。
- 远程组件通过一个远程组件服务独立部署，业务组件更新以后，所有依赖该业务组件的应用不需要重新构建和部署。并且远程组件服务可以根据请求参数中的应用上下文，让不同的应用加载不同版本的远程组件。
- 减少定制流程和工作量，减少项目定制费用。
